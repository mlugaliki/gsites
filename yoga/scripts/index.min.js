"use strict";

(function () {
  // init banner
  var $bannerImgContainer = $('.j-banner-img-container');
  var bannerRatio = $bannerImgContainer.data('height') / $bannerImgContainer.data('width');
  var bannerWidth = width() - 32;
  var bannerHeight = (width() - 32) * bannerRatio;
  $bannerImgContainer.css('width', bannerWidth + 'px');
  $bannerImgContainer.css('height', bannerHeight + 'px'); // top header

  var $topHeader = $('.j-top-header');
  $topHeader.css('height', (92 + bannerHeight + 32) * 0.7 + 'px');
  $topHeader.css('margin-bottom', (92 + bannerHeight + 32) * 0.3 + 'px');
  var cover_width = bannerWidth - 32;
  var cover_height = bannerRatio * cover_width;
  var $itemsImg = $('.j-cover');
  $itemsImg.map(function () {
    $(this).css('height', +cover_height + 'px');
    $(this).css('width', cover_width + 'px');
  }); // scroll to top

  $('.j-back-top').on('click', function () {
    $(window).scrollTop(0);
  });
  var $bottom_nav_items = $('.j-bottom-nav-item');
  $bottom_nav_items.on('click', function (e) {
    e.stopPropagation();
    window.location.href = $(e.target).closest('.j-bottom-nav-item').data('href');
  }); // account click

  var $account = $('.j-more');

  if ($account) {
    $account.on('click', function () {
      var dest = $account.data('link');
      var search = window.location.search;

      if (search.length > 0) {
        if (dest.indexOf('?') < 0) {
          dest += search;
        } else {
          dest += search.substr(1);
        }
      }

      window.location.href = dest;
    });
  }
})();
